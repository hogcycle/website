[{"content":"The Sephia swap is a often talked about in Miata circles, but documentation for it is scarce. It is my goal with this article to both define the Sephia swap and without getting too intimate, explain how the swap is done. This will not be a guide for swapping a BP in and out of an NA Miata. That has been thoroughly documented by people much more experienced than myself, and would be redundant to cover. I am writing this under the assumption that you know how to turn a wrench. Anything not unique to the Sephia swap will not be covered. I will simply explain some of the quirks that come with this swap and how I got around them. Note, this only applies for the 1.8L BP. The 1.6L used in the Sephia is a 8v SOHC turd, and Miata 1.6L\u0026rsquo;s are easy enough to obtain for cheap.\nBackground THIS! is a first generation Kia Sephia. Quite the looker.\nSpecifically, it\u0026rsquo;s the 1995 to 1997 model year that we care about. These share our beloved cast-iron BP05.\nIf you are unsure if you\u0026rsquo;re looking at a Kia BP, here\u0026rsquo;s a photo of a Kia BP05.\nJunkyards carry these for pennies. I picked mine up for $312 with 70k miles.\nQuick note, all the myths of the Kia engine not having oil squirters or less aggressive cams are wrong. At heart, these engines are identical.\nThe Swap While things will bolt right up to the Miata trans and subframe, some work must be done to prepare it. Here\u0026rsquo;s everything that comes off the Kia motor that\u0026rsquo;s scrap.\nIntake and exhaust manifold Oil pan, windage tray, and pickup tube. Fuel rail Front water neck that bolts to the head Coil packs/CAS hybrid thing Oil pressure switch Accessories Timing cover Various bracketry Motor mounts Transmission shim Here\u0026rsquo;s everything that comes off the Kia motor that is unique, yet interchangable\nValve cover Oil pump (dipstick tube needs modification, see below) Camshaft gears Everything else is identical.\nFabricobbling Start tackling the easy stuff. Remove the CAS/distributor thing on the exhaust cam, spark plug wires, spark plugs. Remove the intake and exhaust manifolds. If your engine came with accesssory brackets, remove them. The next chore is the oil pump. You have to remove the timing belt anyway to access the water neck, so get to the pump and remove it. I tried doing this with the pump on the engine and failed. Learn from me.\nOn FWD applications, the dipstick tube is on the oil pump. While it\u0026rsquo;s harmless to leave in there, I didn\u0026rsquo;t want to drive around with two dipsticks. First thing I did was cut it down with a cut off wheel. Leave a few inches to work with.\nDon\u0026rsquo;t even bother with vice grips. I only got it to twist. Maybe that helps, but pulling it out directly was a no go. The best way is to attack it from the underside. Flip the pump over and you\u0026rsquo;ll see where the tube is pressed in. I used a small socket and a hammer to remove it.\nGreat, it\u0026rsquo;s gone. Now we have a hole in our oil pump. I used a 1/8 NPT plug. Feel free to use whatever works. A more \u0026ldquo;professional\u0026rdquo; approach would be to use an actual plug. This works and I don\u0026rsquo;t need a machine shop for it. This doesn\u0026rsquo;t hold any oil pressure, so it doesn\u0026rsquo;t need to be crazy.\nRear Water Neck Here you have a choice. The BP was originally intended for FWD applications like the Sephia. It was stuffed into a RWD application like the Miata with little regard for trivial things such as cooling. Budget-minded coolant reroutes actually use the rear water outlet of the Sephia on the Miata. You just need I opted not to do this, as this car was stock, rusty, and I intend to sell it soon. Swap the Mazda one on if you want, it bolts right up. Make sure you remove the rear thermostat if using the Mazda housing. The Kia has a sensor of some kind threaded into the back of the head. Remove it and use the bolt in the same spot on the Miata head.\nOn the Sephia, a hardline comes out of the head and splits off to the heater core and something else. On the Miata, this hardline goes to a jacket around the oil leaving and entering the oil filter. Discourse on this jacket and its utility is a toss-up really. I opted to not swap it over to the Kia motor as it would require swapping over the stud for the oil filter and I couldn\u0026rsquo;t think of a way to remove the Mazda hardline without damaging it. So here\u0026rsquo;s what I did.\nThe Kia line has a big piece where the heater core hose goes. I heated up the head around it with a torch, put a large cheater pipe on it to distribute the hammer blows. You can ruin the heater core pipe, it doesn\u0026rsquo;t matter. Do note that if you want to keep the oil filter jacket thingy, don\u0026rsquo;t damage the smaller tube. Once that was out, it needed to be sealed. I clamped it with vice grips, hammered it shut, and sealed it up with weld. This should be rock solid, but time will tell.\nPhoto by reddit.com/user/CarbonWood\nOil Pressure Switch The pressure switches weren\u0026rsquo;t the same between this 97 engine and my 94 Miata engine. I have a \u0026ldquo;real\u0026rdquo; pressure sensor, so maybe they\u0026rsquo;re the same for fake ones. I couldn\u0026rsquo;t get a wrench on it, so I just smacked the sensor with a hammer and got a socket on there. Power Steering Pump This one was a doozy. In order to remove the pump bracket from the old motor, I had to remove the bushing that was in the way. A hammer takes care of that. Reinstallation is not so easy. I first used a hammer and socket to seat it, then ended up using a large bolt and nut to clamp it back into it\u0026rsquo;s home. I recommend an impact and using grease on the threads. Front Water Neck Remove the timing cover and discard of it. Remove the water neck and discard of it. You will be greeted with a freeze plug. Approach this with great care, otherwise you\u0026rsquo;ll have to get creative like me. I think the best way to approach this would be to drill a hole in the center, put a wood screw in there, and pry. I ended up getting mine lodged sideways in the head. If you\u0026rsquo;re like me, here\u0026rsquo;s my approach.\nUse pliers to grab it and wedge it so it\u0026rsquo;s perpendicular to the face of where the neck bolts up. Use a Dremel to carefully slice a chunk out of of the wall of the plug. Use the room granted by this slice to squeeze it out. This took me an hour. Don\u0026rsquo;t be like me.\nThat\u0026rsquo;s everything that needs a Brogan adjustment, everything else is bolt up.\nWhat\u0026rsquo;s left Once you\u0026rsquo;ve done all that, everything else bolts up.\nHere\u0026rsquo;s an image of everything that came off the Sephia engine and was not used on the Miata engine.\n","permalink":"https://gysli.ng/posts/auto/sephia/","summary":"\u003cp\u003eThe Sephia swap is a often talked about in Miata circles, but documentation for it is scarce. It is my goal with this article to both define the Sephia swap and without getting too intimate, explain how the swap is done. This will not be a guide for swapping a BP in and out of an NA Miata. That has been thoroughly documented by people much more experienced than myself, and would be redundant to cover. I am writing this under the assumption that you know how to turn a wrench. Anything not unique to the Sephia swap will not be covered.\nI will simply explain some of the quirks that come with this swap and how I got around them.\nNote, this only applies for the 1.8L BP. The 1.6L used in the Sephia is a 8v SOHC turd, and Miata 1.6L\u0026rsquo;s are easy enough to obtain for cheap.\u003c/p\u003e","title":"The (Mostly) Definitive Guide to the Sephia Swap"},{"content":"LXCs are great, but LXC templates that are booted and instantly accessible over SSH and running services are better. The best part is that it\u0026rsquo;s done without iterative, stateful tools like Ansible or needing to provision before running a deployment tool like Colmena. It just works.\nlxc.nix is where all the nitty-gritty is. A sample here is provided, and any other nix files need to be imported here to be baked into the tarball.\n` { modulesPath, \u0026hellip; }: { imports = [ ./base.nix (modulesPath + \u0026ldquo;/virtualisation/proxmox-lxc.nix\u0026rdquo;) ]; boot.isContainer = true;\nSupress systemd units that don\u0026rsquo;t work because of LXC systemd.suppressedSystemUnits = [ \u0026ldquo;dev-mqueue.mount\u0026rdquo; \u0026ldquo;sys-kernel-debug.mount\u0026rdquo; \u0026ldquo;sys-fs-fuse-connections.mount\u0026rdquo; ]; } `\nbase.nix will be loaded in upon boot. Note that this is Nix, and if you update configuration.nix on the host later, this will be overwritten. Treat each template as stateful; make edits and recompile the tarball as needed.\n{ pkgs, ...}: { system.stateVersion = \u0026quot;24.11\u0026quot;; users.users.nixos = { isNormalUser = true; extraGroups = [ \u0026quot;wheel\u0026quot; ]; openssh.authorizedKeys.keys = [ \u0026quot;ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIIbtvGsRqXeaWMxilWAfzqCi2ng6Aiiy7xp8oBh+Ugiq nate@repono\u0026quot; ]; }; services.openssh = { enable = true; settings.PasswordAuthentication = false; settings.KbdInteractiveAuthentication = false; settings.PermitRootLogin = \u0026quot;no\u0026quot;; }; security.sudo.wheelNeedsPassword = false; environment.systemPackages = with pkgs; [ vim binutils wget ]; }\nThe secret is in https://github.com/nix-community/nixos-generators. Build using\nnix run github:nix-community/nixos-generators -- --format proxmox-lxc --configuration lxc.nix\nIn PVE, upload the template in Datacenter \u0026gt; pve \u0026gt; local (pve).\nWhen creating the container, make sure Nesting is checked.\nTo avoid the (busctl)[https://github.com/nix-community/nixos-generators/issues/319] error (EDIT July 2024: patched https://github.com/NixOS/nixpkgs/pull/328682)\nBuild image Run image Update nix channels as root Reboot. Install desired configuration.nix and attempt to switch to it Force a reboot sudo reboot -f ","permalink":"https://gysli.ng/posts/tech/proxmox-nixos/","summary":"\u003cp\u003eLXCs are great, but LXC templates that are booted and instantly accessible over SSH and running services are better. The best part is that it\u0026rsquo;s done without iterative, stateful tools like Ansible or needing to provision before running a deployment tool like Colmena. It just works.\u003c/p\u003e\n\u003cp\u003elxc.nix is where all the nitty-gritty is. A sample here is provided, and any other nix files need to be imported here to be baked into the tarball.\u003c/p\u003e","title":"NixOS inside LXC (without flakes) made easy"},{"content":"Hi, I\u0026rsquo;m Nathaniel 👋\nI\u0026rsquo;m passionate about complex technical topics ranging from Linux, self-hosting, DevOps, and especially systems administration.\nI am currently an undergraduate student at the University of Delaware pursuing a B.S in Computer Science. In my free time I like to turn laps and turn wrenches.\nI am:\nan active contributor to nixpkgs an avid selfhoster and digital sovereign a gearhead You can find other things I do at:\nGitHub: hogcycle ","permalink":"https://gysli.ng/about/","summary":"\u003cp\u003eHi, I\u0026rsquo;m Nathaniel 👋\u003c/p\u003e\n\u003cp\u003eI\u0026rsquo;m passionate about complex technical topics ranging from Linux, self-hosting, DevOps, and especially systems administration.\u003c/p\u003e\n\u003cp\u003eI am currently an undergraduate student at the University of Delaware pursuing a B.S in Computer Science. In my free time I like to turn laps and turn wrenches.\u003c/p\u003e\n\u003cp\u003eI am:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003ean active contributor to \u003ca href=\"https://search.nixos.org/packages\"\u003enixpkgs\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003ean avid selfhoster and digital sovereign\u003c/li\u003e\n\u003cli\u003ea gearhead\u003c/li\u003e\n\u003c/ul\u003e\n\u003cp\u003eYou can find other things I do at:\u003c/p\u003e\n\u003cul\u003e\n\u003cli\u003eGitHub: \u003ca href=\"https://github.com/hogcycle\"\u003ehogcycle\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e","title":""},{"content":"","permalink":"https://gysli.ng/tech/","summary":"technical","title":"Technical"}]